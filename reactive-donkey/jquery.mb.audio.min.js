var $jscomp={scope:{},IteratorResult:function(){},Iterator:function(){},Iterable:function(){}};$jscomp.Iterable.prototype.$$iterator=function(){};$jscomp.makeIterator=function(b){if(b.$$iterator)return b.$$iterator();if(!(b instanceof Array)&&"string"!=typeof b)throw Error();var k=0;return{next:function(){return k==b.length?{done:!0}:{done:!1,value:b[k++]}}}};$jscomp.copyProperties=function(b,k){for(var a in k)b[a]=k[a]};
$jscomp.inherits=function(b,k){function a(){}a.prototype=k.prototype;b.superClass_=k.prototype;b.prototype=new a;b.prototype.constructor=b;b.base=function(a,b,f){var g=Array.prototype.slice.call(arguments,2);return k.prototype[b].apply(a,g)}};
var ua=navigator.userAgent.toLowerCase(),isAndroid=/android/.test(ua),isiOs=/(iphone|ipod|ipad)/.test(ua),isStandAlone=window.navigator.standalone,isiPad=ua.match(/ipad/),isDevice="ontouchstart"in window,isChrome="chrome"in window,isMoz="mozAnimationStartTime"in window;String.prototype.asId=function(){return this.replace(/[^a-zA-Z0-9_]+/g,"")};function supportType(b){var k=document.createElement("audio");b=k.canPlayType&&k.canPlayType(b);return""==b?!1:!0}
(function(b){function k(a){this.name="string"==typeof a?a:a.mp3.split(".")[0].asId();this.soundInPlay=null;this.playingSounds=[];this.isMuted=!1;b.mbAudio.ch.push(this)}b.mbAudio={name:"mb.audio",author:"Matteo Bicocchi",version:"1.5",defaults:{id:"",ogg:"",mp3:"",loop:!1,volume:10},sounds:{},players:{},loaded:{},playing:[],ch:[],soundsMutedByHand:!1,build:function(a){b.mbAudio.isInit||(b(window).on("blur",function(){b.mbAudio.soundsMutedByHand=!0;b.mbAudio.muteAllSounds()}).on("focus",function(){b.mbAudio.soundsMutedByHand=
!1;b.mbAudio.unMuteAllSounds()}),b.mbAudio.isInit=!0);var c="string"==typeof a?b.mbAudio.sounds[a]:a;a=c.id?c.id:"string"==typeof a?a:a.mp3.split(".")[0].asId();1!=b.mbAudio.loaded[a]&&(c=supportType("audio/mpeg")?c.mp3:c.ogg,b.mbAudio.players[a]=new Audio(c),b.mbAudio.players[a].load(),b.mbAudio.players[a].pause(),b.mbAudio.loaded[a]=1)},getPlayer:function(a){var c=document.getElementById("mbAudio_"+a);0!=b(c).length&&b.mbAudio.players[a]||(a="string"==typeof a?b.mbAudio.sounds[a]:a,a=a.id?a.id:
"string"==typeof sound?sound:sound.mp3.split(".")[0].asId());return b.mbAudio.players[a]},preload:function(){for(var a in b.mbAudio.sounds)b.mbAudio.build(a);b(document).trigger("soundsLoaded")},play:function(a,c,d){var f="string"==typeof a?b.mbAudio.sounds[a]:a;if(f){var g=f.id?f.id:"string"==typeof a?a:a.mp3.split(".")[0].asId(),e=f.loop?f.loop:b.mbAudio.defaults.loop,k="number"==typeof f.volume?f.volume:b.mbAudio.defaults.volume,k=10<k?10:k;b.mbAudio.build(a);var h=b.mbAudio.getPlayer(g);h.vol=
k;h.volume=b.mbAudio.allMuted?0:h.vol/10;b(h).off("ended."+g+",paused."+g);"undefined"==typeof c&&(c=!0);if(!c||"string"!=typeof c&&"object"!=typeof c){if(e)b(h).one("ended."+g+",paused."+g,function(){this.currentTime=0;if("number"==typeof e&&("undefined"==typeof h.counter&&(h.counter=0),h.counter++,h.counter===e)){delete h.counter;b.mbAudio.playing.splice(g,1);delete h.isPlaying;"function"==typeof d&&d(h);return}b.mbAudio.play(a,c,d)});else b(h).on("ended."+g+",paused."+g,function(){b.mbAudio.playing.splice(g,
1);delete h.isPlaying;"function"==typeof d&&d(h)});h.pause();h.currentTime&&c&&(h.currentTime=0);h.play();f=jQuery.inArray(g,b.mbAudio.playing);b.mbAudio.playing.splice(f,1);b.mbAudio.playing.push(g);h.isPlaying=!0}else if(c="string"==typeof c?f.sprite[c]:c,clearTimeout(h.timeOut),isAndroid||isiOs||0!=h.seekable.length)b.mbAudio.manageSprite(h,g,a,c,d);else{h.pause();var l=setInterval(function(){0<h.seekable.length&&h.seekable.end(0)>=c.end-1&&(clearInterval(l),b.mbAudio.manageSprite(h,g,a,c,d))},
1)}}},manageSprite:function(a,c,d,f,g){function e(a,b,d,c,f){a.currentTime=c.start;Math.round(a.currentTime)!=Math.round(c.start)?e(a,b,d,c,f):k(a,b,d,c,f)}function k(a,c,d,e,f){var g=1E3*(e.end-e.start)+100,m=!0;a.play();a.isPlaying=!0;a.timeOut=setTimeout(function(){e.loop?(m=!1,e.loop=1==e.loop?9999:e.loop,a.counter||(a.counter=1),a.counter!=e.loop&&a.isPlaying?(a.counter++,a.currentTime=e.start||0,b.mbAudio.play(d,e,f)):(a.counter=0,m=!0,a.pause(),delete a.isPlaying)):(a.pause(),delete a.isPlaying);
m&&"function"==typeof f&&f(a);var g=jQuery.inArray(c,b.mbAudio.playing);b.mbAudio.playing.splice(g,1)},g);b.mbAudio.playing.push(c);a.isPlaying=!0}a.pause();e(a,c,d,f,g)},stop:function(a,c){if(a){var d="string"==typeof a?b.mbAudio.sounds[a]:a;if(d){var f=d.id?d.id:"string"==typeof a?a:a.mp3.split(".")[0].asId(),d=b.mbAudio.getPlayer(f);1!=b.mbAudio.loaded[f]&&b.mbAudio.build(a);d.pause();d.currentTime&&(d.currentTime=0);b(d).off("ended."+f);"function"==typeof c&&c(d);f=jQuery.inArray(f,b.mbAudio.playing);
b.mbAudio.playing.splice(f,1);delete d.isPlaying;delete d.counter}}},pause:function(a,c){var d="string"==typeof a?b.mbAudio.sounds[a]:a,f=d.id?d.id:"string"==typeof a?a:a.mp3.split(".")[0].asId();1!=b.mbAudio.loaded[f]&&b.mbAudio.build(a);d=b.mbAudio.getPlayer(f);d.pause();b(d).off("ended."+f);f=jQuery.inArray(f,b.mbAudio.playing);-1<f&&b.mbAudio.playing.splice(f,1);delete d.isPlaying;delete d.counter;clearTimeout(d.timeOut);"function"==typeof c&&c()},destroy:function(a){var c="string"==typeof a?
b.mbAudio.sounds[a]:a;a=c.id?c.id:"string"==typeof a?a:a.mp3.split(".")[0].asId();b.mbAudio.loaded[a]=0;c=jQuery.inArray(a,b.mbAudio.playing);b.mbAudio.playing.splice(c,1);(a=b.mbAudio.getPlayer(a))&&b(a).remove()},muteAllSounds:function(){var a=b.mbAudio.loaded;if(a){for(var c in a)a=b.mbAudio.getPlayer(c),a.vol=10*a.volume,a.volume=0;b.mbAudio.allMuted=!0}},unMuteAllSounds:function(){var a=b.mbAudio.loaded;if(a){for(var c in a)a=b.mbAudio.getPlayer(c),a.volume=a.vol/10;b.mbAudio.allMuted=!1}},stopAllSounds:function(){var a=
b.mbAudio.loaded;if(a){for(var c in a)b.mbAudio.destroy(c);b.mbAudio.allMuted=!0}},setVolume:function(a,c){var d="string"==typeof a?b.mbAudio.sounds[a]:a,d=d.id?d.id:"string"==typeof a?a:a.mp3.split(".")[0].asId();1!=b.mbAudio.loaded[d]&&b.mbAudio.build(a);d=b.mbAudio.getPlayer(d);d.vol=10<c?10:c;d.volume=d.vol},fadeIn:function(a,c,d,f){d||(d=3E3);d/=4;c="string"==typeof a?b.mbAudio.sounds[a]:a;var g=c.id?c.id:"string"==typeof a?a:a.mp3.split(".")[0].asId();1!=b.mbAudio.loaded[g]&&b.mbAudio.build(a);
var e=b.mbAudio.getPlayer(g),k="number"==typeof c.volume?c.volume:b.mbAudio.defaults.volume,k=10<k?10:k,h=k/10/d;clearInterval(e.fade);e.play();e.currentTime&&(e.currentTime=0);e.volume=0;if(!b.mbAudio.allMuted){var l=0;e.fade=setInterval(function(){l>=k/10?(clearInterval(e.fade),"function"==typeof f&&f(e)):(e.volume=l,l+=h)},0)}b.mbAudio.playing.push(g);e.isPlaying=!0},fadeOut:function(a,c,d){c||(c=3E3);c/=4;var f="string"==typeof a?b.mbAudio.sounds[a]:a,g=f.id?f.id:"string"==typeof a?a:a.mp3.split(".")[0].asId();
1!=b.mbAudio.loaded[g]&&b.mbAudio.build(a);var e=b.mbAudio.getPlayer(g);a=e.volume?10*e.volume:"number"==typeof f.volume?f.volume:b.mbAudio.defaults.volume;a=10<a?10:a;var k=a/10/c;clearInterval(e.fade);e.volume=a/10;e.play();var h=e.volume;e.fade=setInterval(function(){if(0>=h){h=0;clearInterval(e.fade);e.volume=0;e.isPlaying=!1;var a=jQuery.inArray(g,b.mbAudio.playing);b.mbAudio.playing.splice(a,1);e.pause();"function"==typeof d&&d(e)}else e.volume=h,h-=k},0)},queue:{isStarted:!1,add:function(a,
c,d,f){var g="string"==typeof a?a:a.mp3.split(".")[0].asId(),g=b.mbAudio.queue.get(g);null==g&&(g=new k(a));var e="string"==typeof a?b.mbAudio.sounds[a]:a;e.started||(b.mbAudio.pause(a),e.started=!0);c="string"==typeof c?e.sprite[c]:c;e={};e.soundID=a;e.sprite=c;e.channel=g;e.hasPriority=f;e.callback=d;b.mbAudio.queue.isStarted||b.mbAudio.queue.startEngine();b.mbAudio.soundsMutedByHand||(e.hasPriority?(e.channel.playingSounds.splice(0,1),e.channel.soundInPlay=null,g.playingSounds.unshift(e)):g.playingSounds.push(e))},
get:function(a){for(var c in b.mbAudio.ch)if(b.mbAudio.ch[c].name==a)return b.mbAudio.ch[c]},manage:function(){function a(a){null==a.soundInPlay&&a.playingSounds&&0<a.playingSounds.length&&!b.mbAudio.soundsMutedByHand&&!a.isMuted?(a.soundInPlay=a.playingSounds[0],b.mbAudio.play(a.soundInPlay.soundID,a.soundInPlay.sprite,function(){"function"==typeof a.soundInPlay.callback&&a.soundInPlay.callback();a.playingSounds.splice(0,1);a.soundInPlay=null})):null!=a.soundInPlay&&a.soundInPlay.soundID&&(b.mbAudio.soundsMutedByHand||
a.isMuted)&&(b.mbAudio.pause(a.soundInPlay.soundID),a.playingSounds=[],a.playingSounds.unshift(a.soundInPlay),a.soundInPlay=null)}for(var c in b.mbAudio.ch)a(b.mbAudio.ch[c])},mute:function(a){if(a){var c=b.mbAudio.queue.get(a);c&&(c.isMuted=!0);b.mbAudio.pause(a)}else b.mbAudio.soundsMutedByHand=!0},unMute:function(a){if(a){if(a=b.mbAudio.queue.get(a))a.isMuted=!1}else b.mbAudio.soundsMutedByHand=!1},clear:function(a){if(a=b.mbAudio.queue.get(a))null!=a.soundInPlay&&b.mbAudio.pause(a.soundInPlay.soundID),
a.soundInPlay=null,a.playingSounds=[]},startEngine:function(){b.mbAudio.channelsEngine=setInterval(b.mbAudio.queue.manage,1);b.mbAudio.queue.isStarted=!0},stopEngine:function(){clearInterval(b.mbAudio.channelsEngine);b.mbAudio.queue.isStarted=!1}}}})(jQuery);
